---
import { Icon } from 'astro-icon/components'

interface MenuItem {
  slug: string | undefined
  title: string
}

interface Props {
  pages: MenuItem[]
}

const { pages } = Astro.props

export function getBasePath() {
  return import.meta.env.BASE_URL + '/' || '/'
}
---

<nav class="relative bg-gray-100">
  <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
    <div class="relative flex h-16 items-center justify-between">
      <!-- Mobile dropdown -->
      <div class="relative inline-block md:hidden group">
        <button
          type="button"
          class="inline-flex items-center justify-center h-10 w-10 rounded-md border border-gray-200 bg-white text-gray-600 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 transition-colors"
          aria-haspopup="true"
          aria-expanded="false"
        >
          <span class="sr-only">Open main menu</span>
          <Icon name="mdi:menu" size={24} />
        </button>

        <div
          class="absolute left-0 top-full mt-2 min-w-55
            rounded-md border border-gray-200 bg-white p-1 shadow-md z-50
            opacity-0 scale-95 -translate-y-1
            pointer-events-none
            transition duration-150 ease-out
            group-hover:opacity-100 group-hover:scale-100 group-hover:translate-y-0 group-hover:pointer-events-auto
            group-focus-within:opacity-100 group-focus-within:scale-100 group-focus-within:translate-y-0 group-focus-within:pointer-events-auto"
        >
          {
            pages.map(({ slug, title }) => (
              <a
                href={slug == undefined ? getBasePath() : getBasePath() + slug}
                class="flex items-center rounded-sm px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:bg-gray-100 focus:text-gray-900 transition-colors"
              >
                {title}
              </a>
            ))
          }
        </div>
      </div>

      <!-- Desktop nav -->
      <div
        class="flex flex-1 items-center justify-center md:items-stretch md:justify-start"
      >
        <div class="flex shrink-0 items-center">
          <Icon name="mdi:chart-bar" size={40} class="text-slate-500" />
          <div class="hidden md:ml-6 md:block">
            <div class="flex space-x-4">
              {
                pages.map(({ slug, title }) => (
                  <a
                    href={
                      slug == undefined ? getBasePath() : getBasePath() + slug
                    }
                    class="rounded-md px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-200 hover:text-gray-800"
                  >
                    {title}
                  </a>
                ))
              }
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>
